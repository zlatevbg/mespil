const ajax=(()=>{let queues={};axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",axios.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;const CancelToken=axios.CancelToken;function bind(e){if(e)for(const a of e.querySelectorAll("[data-ajax]")){let t,s=a.tagName.toLowerCase(),r=a,o=a.getAttribute("data-method")||"post";const n=a.getAttribute("data-queue")||"sync",l=a.getAttribute("data-spinner")||"icon",i=a.getAttribute("data-ajax-alert")||"form",c=a.getAttribute("data-ajax-alert-position")||"afterbegin",d=a.getAttribute("data-ajax-alert-dismissible")||!0,u=a.getAttribute("data-ajax-alert-class"),p=a.hasAttribute("data-ajax-disable-alert"),m=a.hasAttribute("data-ajax-disable-alert-header");"form"===s?(t=a.getAttribute("action"),o=a.getAttribute("method").toLowerCase()):t="button"===s?a.getAttribute("data-action"):a.href,a.addEventListener("form"===s?"submit":"click",b=>{b.preventDefault(),a.getAttribute("data-form")&&(r=e.querySelector("#"+a.getAttribute("data-form")),s="form");const f=-1===t.indexOf("?")?"?":"&";ajaxify({obj:a,method:o,queue:n,spinner:l,alert:i,alertPosition:c,alertDismissible:d,alertClass:u,disableAlert:p,disableAlertHeader:m,action:t+(null!==a.getAttribute("data-append-id")?"/"+datatable.selected[a.getAttribute("data-table")]:"")+(null!==a.getAttribute("data-overview")?f+"overview=true":""),data:"form"===s?new FormData(r):null})})}}function ajaxify(params){queues[params.queue]={},params.queue.startsWith("sync")&&ajaxAbort(params.queue),params.obj&&(params.tag=params.obj.tagName.toLowerCase(),params.skipLock||ajaxLock(params)),queues[params.queue].source=CancelToken.source(),axios({url:params.action,cancelToken:queues[params.queue].source.token,data:params.data,method:params.method}).then(function(response){if(response.headers["x-location"]&&window.location.replace(response.headers["x-location"]),!response.data.reload&&(201!=response.status&&202!=response.status&&204!=response.status||response.data)||window.location.reload(!0),response.data.callback){const callback=eval(response.data.callback);"function"==typeof callback&&callback(response.data)}if(params.obj&&(params.skipLock||ajaxUnlock(params),ajaxClear(params.obj,params.tag)),response.data.status){params.obj.setAttribute("href",response.data.status.href),params.obj.setAttribute("title",response.data.status.title);let e=params.obj.querySelector("[data-fa-i2svg]");e&&params.obj.removeChild(e),params.obj.insertAdjacentHTML("afterbegin",__.icons.status[response.data.status.icon])}if(response.data.errors&&!params.skipErrors&&ajaxError(params,response.data.errors),(response.data.reset||response.data._old_input)&&ajaxReset(params.obj,response.data),response.data.event&&"undefined"!=typeof gtag&&gtag("event",response.data.event,response.data.eventData),response.data.conversion&&"undefined"!=typeof gtag&&"undefined"!=typeof fbq){gtag("event","conversion",{send_to:"AW-818585655/Gt65CNTus-gBELfAqoYD"}),fbq("track","Lead");let e=new Image;e.src="https://px.ads.linkedin.com/collect/?pid=1378921&conversionId=3797473&fmt=gif"}if(response.data.resetRecaptcha&&grecaptcha.reset(),response.data.datatables&&(datatable.draw(response.data.datatables),$('[data-toggle="popover"]').popover()),response.data.enable)for(const e of document.querySelectorAll(response.data.enable.join(", ")))e.classList.remove("disabled");if(response.data.disable)for(const e of document.querySelectorAll(response.data.disable.join(", ")))e.classList.add("disabled");if(response.data.show)for(const e of document.querySelectorAll(response.data.show.join(", ")))e.classList.remove("hidden"),e.removeAttribute("hidden");if(response.data.hide)for(const e of document.querySelectorAll(response.data.hide.join(", ")))e.classList.add("hidden"),e.setAttribute("hidden","");const message=response.data.success||response.data.message;if(message){let e=params.obj;params.alert&&(e=e.closest(params.alert)),ajaxSuccess(params,e,message)}}).catch(function(e){axios.isCancel(e)?params.obj&&(ajaxUnlock(params),ajaxClear(params.obj,params.tag)):e.response?String(e.response.status).startsWith(30)?window.location.replace(e.response.headers["x-location"]):(params.obj&&(ajaxUnlock(params),ajaxClear(params.obj,params.tag)),422===e.response.status?ajaxError(params,e.response.data.errors):ajaxError(params,e.response.status+": "+e.response.data.message)):e.request})}function ajaxAbort(e){queues[e].source&&queues[e].source.cancel("Operation canceled.")}function ajaxLock(e){let a=e.obj;if("a"===e.tag?a.classList.add("disabled"):"button"===e.tag||"select"===e.tag?a.disabled=!0:(a=a.querySelector("[type=submit]"))&&(a.disabled=!0,e.obj.setAttribute("tabindex","-1"),e.obj.focus(),e.obj.addEventListener("keydown",t=>{if(t.defaultPrevented)return;27===(t.which||t.keyCode)&&a.classList.contains("js-submitted")&&(t.stopPropagation(),ajaxUnlock(e),ajaxAbort(e.queue))}),clearTimeout(queues[e.queue].timer),queues[e.queue].timer=window.setTimeout(()=>a.classList.add("js-submitted"),1e3)),e.spinner){if(queues[e.queue].html=a.innerHTML,"replace"===e.spinner)a.innerHTML="";else{let e=a.querySelector("[data-fa-i2svg]");e&&a.removeChild(e)}a.insertAdjacentHTML("afterbegin",__.icons.spinner)}}function ajaxUnlock(e){let a=e.obj;"a"===e.tag?a.classList.remove("disabled"):"button"===e.tag||"select"===e.tag?a.disabled=!1:(clearTimeout(queues[e.queue].timer),(a=a.querySelector("[type=submit]"))&&(a.disabled=!1,a.focus(),a.classList.remove("js-submitted"))),e.spinner&&(a.innerHTML=queues[e.queue].html)}function ajaxClearSuccess(e,a,t=".alert-success"){ajaxClear(e,a,t)}function ajaxClearDanger(e,a,t=".alert-danger"){ajaxClear(e,a,t)}function ajaxClear(e,a,t=".alert"){let s;if("form"===a){s=e;for(const a of e.querySelectorAll(".form-control")){a.classList.remove("is-valid"),a.classList.remove("is-invalid");const e=a.closest(".form-group, .form-check");let t=e.querySelector("label");t||(t=e),t.classList.remove("is-valid"),t.classList.remove("is-invalid")}}else s=document.querySelector("main");for(const e of s.querySelectorAll(t))e.parentNode.removeChild(e)}function ajaxSuccess(e,a,t,s){"string"==typeof a&&(a=document.querySelector(a)),alertPosition=s||e.alertPosition;const r='<div class="alert alert-success '+e.alertClass+(!0===e.alertDismissible?" alert-dismissible":"")+" fade show "+("replace"!=alertPosition&&a.classList.contains("position-relative")?" position-absolute z-index-alert":"")+'" role="alert">'+(!0===e.alertDismissible?'<button type="button" class="close" data-dismiss="alert" aria-label="'+__.text.close+'"><span aria-hidden="true">&times;</span></button>':"")+("object"==typeof t?t.join("<br>"):t)+"</div>";let o;"replace"==alertPosition?(a.querySelector(".replace-wrapper").classList.add("d-none"),a.insertAdjacentHTML("afterbegin",r)):a.insertAdjacentHTML(alertPosition,r),o=a.id?"#"+a.id:a.tagName+(a.className?"."+a.className:""),document.querySelector(o+" .alert")&&scrollIntoView(o+" .alert")}function ajaxError(e,a){let t=e.obj;if(e.alert&&(t=t.closest(e.alert)),"string"==typeof t&&(t=document.querySelector(t)),"object"==typeof a){!Object.keys(a).length||e.disableAlert||e.disableAlertHeader||t.insertAdjacentHTML("afterbegin",'<div class="alert alert-danger alert-dismissible fade show" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="'+__.text.close+'"><span aria-hidden="true">&times;</span></button>'+__.text.error+"</div>");for(const e of Object.keys(a)){let s;if(e.includes("[]"))s='input[name="'+e+'"]';else if(e.includes(".")){const a=e.split(".");s="#"+a[0]+"-"+(parseInt(a[1])+1)}else s="#"+e;const r=t.querySelector(s);if(r){const t=r.closest(".form-group, .form-check"),s=t.querySelector(".invalid-feedback"),o=t.querySelector(".multiselect-wrapper");let n=t.querySelector("label");n||(n=t),o?(o.querySelector("button").classList.add("is-invalid"),o.insertAdjacentHTML("beforeend",'<span class="invalid-feedback" role="alert">'+a[e].join("<br>")+"</span>")):(r.classList.add("is-invalid"),s.innerHTML=a[e].join("<br>"),n&&n.classList.add("is-invalid"))}else t.querySelector(".alert").insertAdjacentHTML("beforeend",'<p class="fa-left"><i class="fas fa-exclamation-triangle"></i>'+a[e].join("<br>")+"</p>")}}else e.disableAlert||e.disableAlertHeader||t.insertAdjacentHTML("afterbegin",'<div class="alert alert-danger alert-dismissible fade show" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="'+__.text.close+'"><span aria-hidden="true">&times;</span></button>'+a+"</div>");t.id?selector="#"+t.id:selector=t.tagName+(t.className?"."+t.className:""),document.querySelector(selector+" .alert")&&scrollIntoView(selector+" .alert")}function ajaxResetInput(e){const a=e.type.toLowerCase();["checkbox","radio"].includes(a)?e.checked=!1:["select-one","select-multiple"].includes(a)?e.selectedIndex=0:e.value=""}function ajaxReset(e,a){const t=e.querySelectorAll('input:not([type="hidden"]):not([type="submit"]):not([readonly]):not([disabled]), select:not([disabled]), textarea:not([readonly]):not([disabled])');let s;if(a._old_input){s=Object.keys(a._old_input);for(const e of t)s.includes(e.name)||ajaxResetInput(e)}if(a.reset)if(a.reset.only)for(const e of a.reset.only)ajaxResetInput(document.querySelector("#"+e));else if(a.reset.except){s=Object.values(a.reset.except);for(const e of t)s.includes(e.name)||ajaxResetInput(e)}else{for(const e of t)ajaxResetInput(e);"string"==typeof e.tagName&&"form"==e.tagName.toLowerCase()&&e.reset()}}return bind(document),{ajaxify:ajaxify,bind:bind,success:ajaxSuccess,error:ajaxError,clearSuccess:ajaxClearSuccess}})();